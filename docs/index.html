<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>HASap Overview</title>

<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:16px;}
  table{border-collapse:collapse;width:100%;}
  th,td{border:1px solid #ddd;padding:4px;vertical-align:top;}
  th{position:sticky;top:0;background:#fafafa;z-index:1;}
  tr:nth-child(even){background:#fcfcfc;}
  .sid{white-space:nowrap;font-weight:600;}

  audio{outline:none;}
  .sys audio{width:150px;max-width:100%;}

  .trans{white-space:pre-wrap;line-height:1.4;}
  .sys{min-width:140px;}

  :root { --trans-col: clamp(22rem, 48vw, 56rem); }
  .muted{color:#999;}

  thead th:last-child,
  tbody td.trans {
    width: var(--trans-col);
    max-width: var(--trans-col);
  }
  td.trans {
    white-space: normal;
    overflow-wrap: anywhere;
    line-height: 1.4;
  }

  .abstract{
    border:1px solid #e5e5e5;background:#fafafa;padding:12px 14px;border-radius:10px;
    max-width: 1024px;
    margin: 0 auto 16px;
  }
  .abstract h3{margin:0 0 6px 0;font-size:1.05rem}
  .abstract p{margin:6px 0}
  .abstract .links{margin-top:8px;font-size:.95rem}
  .abstract .links a{margin-right:12px}

  .pipeline{
    display:block;
    width:100%;
    max-width: 980px;
    height:auto;
    margin: 8px auto;
    border:1px solid #ddd;border-radius:10px;background:#fff;
  }

  .table-wrap{
    max-width: 1024px;
    margin: 0 auto;
  }

  h1, h2, h3, .muted, .links { text-align: center; }
</style>
</head>

<body>
  <h1>HASAP: Hierarchical Acoustic-Semantic Annotation Pipeline for Scripted Speech Data</h1>

  <section class="abstract">
    <h3>Abstract</h3>
    <p>
      Scripted speech (e.g., audiobooks, dramas) is a rich source for expressive text-to-speech (TTS) synthesis as it tightly couples narrative semantics with acoustic delivery.
      However, conventional data annotation pipelines either process utterances in isolation or rely solely on text cues, resulting in supervision that is inconsistent across utterances and only weakly grounded in acoustics.
      To overcome these limitations, we propose <strong>HASap</strong>, a novel <strong>h</strong>ierarchical <strong>a</strong>coustic–<strong>s</strong>emantic <strong>a</strong>nnotation <strong>p</strong>ipeline that integrates three levels of supervision:
      (i) global narrative semantics inferred by LLM, (ii) utterance-level delivery style reconciled with scene and role context, and (iii) local prosodic emphasis derived from acoustic cues.
      In addition, the pipeline performs context-aware resegmentation to produce role-consistent and semantically coherent speech segments, making them suitable for controllable and expressive TTS training.
      Tested on the StoryTTS dataset with CosyVoice&nbsp;2, HASap significantly outperforms both text-only and unannotated baselines on objective and subjective metrics.
      Ablation studies confirm that hierarchical annotations provide effective control over both overall expressiveness and fine-grained prosody.
    </p>

    <div class="links">
      📦 <a href="https://github.com/yzjlike0718/HASap" target="_blank" rel="noopener">GitHub</a>
    </div>

    <img class="pipeline" src="assets/pics/pipeline.png" alt="HASap pipeline" loading="lazy">
  </section>

  <h2>Annotation Systems Comparison</h2>
  
  <div class="table-wrap">
    <p class="muted"><strong>Compared systems.</strong> We compare three systems trained on StoryTTS with a CosyVoice&nbsp;2 backbone: (i) <strong>HASap</strong>: trained with HASap annotations; (ii) <strong>StoryTTS-Orig</strong>: trained with the original StoryTTS annotations; (iii) <strong>Transcript-only</strong>: trained without additional expressiveness annotations. These systems differ only in supervision. For reference, we also report <strong>GT</strong> (ground-truth recordings).</p>
    <table>
      <thead>
        <tr>
          <th class='sys'>HASap</th>
          <th class='sys'>StoryTTS-Orig</th>
          <th class='sys'>Transcript-only</th>
          <th class='sys'>GT</th>
          <th>Transcript</th>
        </tr>
      </thead>
      <tbody>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/001.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/001.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/001.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/001.wav'></audio></td><td class='trans'>就这一笑不要紧，主父衍觉得毛骨悚然，</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/002.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/002.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/002.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/002.wav'></audio></td><td class='trans'>旨意算传下去了，刹那间朝堂之上鸦雀无声，文武百官全都吓傻了，主父衍可了不得出这计策，大家伙你看看我，我看看你，看着看着都偷眼观瞧东方朔，东方朔这时候干什么呢？</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/003.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/003.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/003.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/003.wav'></audio></td><td class='trans'>皇上，臣曾经计算过，我大汉，凡是家产在五百万民以上，田地在五千亩以上，家奴在五百人以上的富豪，如果都迁到茂陵，至少得三百多家。</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/004.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/004.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/004.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/004.wav'></audio></td><td class='trans'>老百姓往旁边一闪，大侠郭解，腾腾腾往前走了几步。站到了营前，</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/005.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/005.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/005.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/005.wav'></audio></td><td class='trans'>将军，我郭解有何德能让你们父子这样信任于我？</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/006.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/006.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/006.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/006.wav'></audio></td><td class='trans'>公孙弘一听，往后倒退了两步，不过他听了之后心里确实也觉得有点委屈他知道，离骚这两句话说得非常清楚，而东方朔用宝剑指着自己朗诵出这两句话来，</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/007.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/007.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/007.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/007.wav'></audio></td><td class='trans'>只要太子在这招兵买马排兵布阵的情形传到长安城，皇上绝不会善罢甘休，恐怕淮南王落大年纪就得死在这件事上，再说，雷贝也听说了，郭解郭大侠！现在逃出在外，而且现在黄榜已然贴出来了。要捉拿郭解，皇上是非杀郭解不可。</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/008.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/008.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/008.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/008.wav'></audio></td><td class='trans'>因为公孙弘是个大儒者呀！他听出来了，东方朔朗诵的是屈原的离骚，咱们都知道，屈原姓屈，名平自原，在离骚当中，他称自己为灵君，</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/009.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/009.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/009.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/009.wav'></audio></td><td class='trans'>因为屈原出生的时候，正是更衣年，又是更衣月，又是更衣日，而且这年他出生的日子也正好是大年初一，屈原认为自己，出生就不是个凡人，将来必大有作为，而东方朔呢，恰恰也是大年初一生的，</td></tr>
        <tr><td class="sys"><audio controls preload='none' src='assets/audios/compare/HASap/010.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/StoryTTS-Orig/010.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/Transcript-only/010.wav'></audio></td><td class="sys"><audio controls preload='none' src='assets/audios/compare/GT/010.wav'></audio></td><td class='trans'>东方夫人，你先替朕想想办法，文君呐，朕听说你琴弹得非常好，可是朕从来也没有听过，今天能给朕弹奏一曲吗？</td></tr>
      </tbody>
    </table>
  </div>
</body>
</html>
